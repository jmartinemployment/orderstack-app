<aside class="sidebar" [class.mobile-open]="mobileOpen()">
  <div class="sidebar-header">
    <div class="brand-section">
      <span class="brand-icon">
        <i class="bi bi-stack"></i>
      </span>
      @if (!collapsed()) {
        <span class="brand-text">OrderStack</span>
      }
    </div>
    <button class="btn btn-link collapse-btn d-none d-md-block" (click)="toggle.emit()" [attr.aria-label]="collapsed() ? 'Expand sidebar' : 'Collapse sidebar'">
      <i class="bi" [class.bi-chevron-left]="!collapsed()" [class.bi-chevron-right]="collapsed()"></i>
    </button>
  </div>

  <nav class="sidebar-nav">
    @for (item of navItems(); track (item.key ?? item.route)) {
      <a class="nav-item"
         [routerLink]="item.route"
         routerLinkActive="active"
         [class.nav-alert-critical]="item.alertSeverity === 'critical'"
         [class.nav-alert-warning]="item.alertSeverity === 'warning'"
         [class.nav-alert-info]="item.alertSeverity === 'info'"
         (click)="closeMobile.emit()"
         [title]="collapsed() ? item.label : ''">
        <i class="bi {{ item.icon }}"></i>
        @if (!collapsed()) {
          <span class="nav-label">{{ item.label }}</span>
        }
      </a>
    }
  </nav>

  <div class="sidebar-footer">
    @if (restaurantName(); as name) {
      <div class="restaurant-info" [title]="collapsed() ? name : ''">
        <i class="bi bi-shop"></i>
        @if (!collapsed()) {
          <div class="restaurant-details">
            <span class="restaurant-name">{{ name }}</span>
            @if (restaurantAddress(); as addr) {
              <small class="restaurant-address">{{ addr }}</small>
            }
          </div>
        }
      </div>
    }
    @if (userName(); as uName) {
      <div class="user-info">
        <i class="bi bi-person-circle"></i>
        @if (!collapsed()) {
          <span class="user-name">{{ uName }}</span>
          <button class="btn btn-link logout-btn" (click)="loggedOut.emit()" aria-label="Logout">
            <i class="bi bi-box-arrow-right"></i>
          </button>
        }
      </div>
    }
  </div>
</aside>
